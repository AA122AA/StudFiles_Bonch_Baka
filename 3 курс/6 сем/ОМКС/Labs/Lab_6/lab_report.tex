\documentclass[a4paper,14pt]{extarticle} 
\usepackage[a4paper,top=1.5cm, bottom=1.5cm, left=2cm, right=1cm]{geometry}
%\usepackage[T2A]{fontenc}
%\usepackage[english, russian]{babel}
\usepackage{graphicx}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}

\usepackage{fontspec}
\setmainfont{Times New Roman}
\setsansfont{FreeSans}
\setmonofont{FreeMono}
\renewcommand{\baselinestretch}{1.5}
\usepackage{polyglossia}
\setdefaultlanguage{russian}
\setotherlanguages{english,russian}
\usepackage{setspace}
\usepackage[many]{tcolorbox}
\usepackage{listings}
\usepackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

\begin{document}
    \begin{center}
        \thispagestyle{empty}
        \begin{singlespace}
        МИНИСТЕРСТВО ЦИФРОВОГО РАЗВИТИЯ, СВЯЗИ И МАССОВЫХ КОММУНИКАЦИЙ РОССИЙСКОЙ ФЕДЕРАЦИИ

        ФЕДЕРАЛЬНОЕ ГОСУДАРСТВЕННОЕ БЮДЖЕТНОЕ ОБРАЗОВАТЕЛЬНОЕ

        УЧРЕЖДЕНИЕ ВЫСШЕГО ОБРАЗОВАНИЯ

        «САНКТ-ПЕТЕРБУРГСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ ТЕЛЕКОММУНИКАЦИЙ ИМ. ПРОФ. М.А. БОНЧ-БРУЕВИЧА»

        (СПбГУТ)
        \end{singlespace}
        \vspace{-1ex}
        \rule{\textwidth}{0.4pt}
        \vspace{-5ex}

        Факультет \underline{Инфокоммуникационных сетей и систем}

        Кафедра \underline{Защищенных систем связи}
        \vspace{10ex}

        \textbf{Лабораторная работа №6}

    \end{center}
    \vspace{4ex}
    \begin{flushright}
    \parbox{10 cm}{
    \begin{flushleft}
        Выполнили студенты группы ИКТЗ-83:

        \underline{Громов А.А., Миколаени М.С., Мазеин Д.С.} \hfill \rule[-0.85ex]{0.1\textwidth}{0.6pt}

        \footnotesize \textit{ (Ф.И.О., № группы) \hfill (подпись)} \normalsize

        Проверил:

        \underline{Скорых М.А.} \hfill \rule[-0.85ex]{0.1\textwidth}{0.6pt}

        (\footnotesize \textit{уч. степень, уч. звание, Ф.И.О.) \hfill (подпись)} \normalsize

    \end{flushleft}
    }
    \end{flushright}
    \begin{center}
        \vfill
        Санкт-Петербург

        2021

    \end{center}
    \newpage

    \textbf{Цель лабораторной работы:}
    Повторение основных концепций из курса "Основы построения компьютерных сетей"
    

    \begin{enumerate}
        \item lab 3.1.4
        \begin{itemize}
            \item
                \begin{center}
                    \includegraphics[scale=0.4]{pics/3.1.4_1.png} 
                    Широковещательный запрос
                \end{center} 

            \item \textbf{Назовите не менее трех других доступных приложений.}\par
            HTTP, HTTPS, SSH

            \item \textbf{Если компьютер в сети VLAN 10 отправляет широковещательное сообщение, какие устройства его получат?}\par
            Устройства, которые находятся в VLAN 10.

            \item \textbf{Если компьютер в сети VLAN 20 отправляет широковещательное сообщение, какие устройства его получат?}\par
            Устройства, которые находятся в VLAN 20.

            \item \textbf{Если компьютер в сети VLAN 30 отправляет широковещательное сообщение, какие устройства его получат?}\par
            Устройства, которые находятся в VLAN 30.

            \item \textbf{Что происходит с кадром, отправленным с компьютера сети VLAN 10 на компьютер сети VLAN 30?}\par
            Кадр будет отброшен.

            \item \textbf{Какие порты включаются на коммутаторе, если компьютер, \linebreak подключенный к порту 11, отправляет одноадресное сообщение на компьютер, подключенный к порту 13?}\par
            В передаче будут задействованы порты fa0/11 и fa0/13.

            \item \textbf{Какие порты включаются на коммутаторе, если компьютер, \linebreak подключенный к порту 2, отправляет одноадресное сообщение на \linebreak компьютер, подключенный к порту 23?}\par
            В попытке передачи одноадресного сообщения будут задействованы все порты относящиеся к Vlan источника. Порт получателя задействован не будет.

            \item \textbf{Что представляют собой коллизионные домены на коммутаторе применительно к портам?}\par
            Каждое соединение коммутатора с хостом образует коллизионный домен. То есть в нашем случае их 24.

            \item \textbf{Что представляют собой широковещательные домены на коммутаторе применительно к портам?}\par
            Каждый vlan создает широковещательный домен. То есть в нашем случае их 3. Порты в одном vlan являются частью одного широковещательного домена.

        \end{itemize}
        \newpage
        \item lab 3.2.8
        \begin{itemize}
            \item 
                \begin{center}
                    \includegraphics[scale=0.4]{pics/3.2.8_1.png}
                    \singlespacing
                    Попытка сделать ping запрос на PC6(неудачная, так как PC6 в другом vlan)
                \end{center}
            \item 
                \begin{center}
                    \includegraphics[scale=0.4]{pics/3.2.8_2.png}
                    \singlespacing
                    Попытка сделать ping запрос на PC4(удачно, так как PC1 и PC4 находятся в одном vlan)
                \end{center}
            \item \textbf{Почему коммутатор S1, получив пакет, пересылает его на узел PC7?}\par
            Так как PC7 находится в одном vlan с PC1.

            \item \textbf{Какая команда используется для удаления загрузочной конфигурации на коммутаторах?}\par
            \begin{lstlisting}
erase startup-config
            \end{lstlisting}

            \item \textbf{Где на коммутаторах хранится файл сети VLAN?}\par
            \begin{lstlisting}
flash:/vlan.dat
            \end{lstlisting}

            \item \textbf{С помощью какой команды можно удалить файл сети VLAN на коммутаторах?}\par
            \begin{lstlisting}
delete flash:/vlan.dat
            \end{lstlisting}

            \item \textbf{Если компьютер в сети VLAN 10 отправляет широковещательное сообщение, какие устройства его получат?}\par
               Устройства находящиеся в vlan 10. 

            \item \textbf{Если компьютер в сети VLAN 20 отправляет широковещательное сообщение, какие устройства его получат?}\par
               Устройства находящиеся в vlan 20. 

            \item \textbf{Если компьютер в сети VLAN 30 отправляет широковещательное сообщение, какие устройства его получат?}\par
               Устройства находящиеся в vlan 30. 

            \item \textbf{Что происходит с кадром, отправленным с компьютера сети VLAN 10 на компьютер сети VLAN 30?}\par
                Кадр отбрасывается.

            \item \textbf{Что представляют собой коллизионные домены на коммутаторе применительно к портам?}\par
                Каждое соединение коммутатора с хостом образует коллизионный домен. То есть в нашем случае их 24.

            \item \textbf{Что представляют собой широковещательные домены на коммутаторе применительно к портам?}\par
                Каждый vlan создает широковещательный домен. То есть в нашем случае их 3. Порты в одном vlan являются частью одного широковещательного домена.

        \end{itemize}
        \item lab 3.3.12
        \begin{itemize}
            \item \textbf{Какие преимущества могут предоставить сети VLAN?}
                Они помогут ограничить широковещательный домен до машин из одной сети, так как без vlan широковещательные сообщения получают все пк.
                \begin{center}
                    \includegraphics[scale=0.5]{pics/3.3.12_2.png}
                    
                    Делаем широковещательный запрос.
                    \includegraphics[scale=0.3]{pics/3.3.12_1.png}
                \end{center}

            \item Команды для настройки
                \begin{lstlisting}
en
conf t
vlan 10 
name Faculty/Staff
vlan 20 
name Students
vlan 30 
name Guest(Default)
vlan 99 
name Management&Native
vlan 150 
name VOICE
exit
exit
sh vl br
                    
conf t
int f0/11
switchport mode access
switchport access vlan 10
int f0/18
switchport mode access
switchport access vlan 20
int f0/6
switchport mode access
switchport access vlan 30
                \end{lstlisting}
            \item vlan настроены
                \begin{center}
                    \includegraphics[scale=0.4]{pics/3.3.12_3.png}
                \end{center}
            \item \textbf{Успешно ли выполняются эхо-запросы при назначении портов доступа в соответствующие сети VLAN?}\par
                Нет, эхо-запрос выполняется не успешно. 
                \begin{center}
                    \includegraphics[scale=0.45]{pics/3.3.12_4.png}
                \end{center}

            \item \textbf{Что можно сделать для разрешения этой проблемы?}\par
                Для решения данной проблемы нужно настроить транки на гигабитных портах. А так же S1 коммутатор. 
        \end{itemize}
        \item lab 3.4.5
        \begin{itemize}
            \item Настройка trunk
                \begin{lstlisting}
switchport mode trunk
                \end{lstlisting}
            \item Настройка native vlan 
                \begin{lstlisting}
switchport trunk native vlan 99
                \end{lstlisting}
            \item \textbf{Почему при разных native VLAN на коммутаторах трафик все равно идет?}\par
                Это связано с тем, что любой нетегированный трафик в любом случае будет пересылаться в native vlan.
            \item \textbf{Каким активным сетям VLAN разрешено передавать данные по этому магистральному каналу?}\par
                1, 10, 20, 30, 88, 99
                
            \item \textbf{Почему порт G0/1 на коммутаторе S2 больше не назначен сети VLAN 1?}\par
                Так как данный порт переведён в режим Trunk.
                
        \end{itemize}
        \item lab 3.5.5
        \begin{itemize}
            \item Команды для настройки S2 и S3
                \begin{lstlisting}
en 
conf t
vlan 10 
name Red
vlan 20 
name Blue
vlan 30
name Yellow
exit
int range f0/1-8
switchport mode access
switchport access vlan 10
int range f0/9-16
switchport mode access
switchport access vlan 20
int range f0/16-24
switchport mode access
switchport access vlan 30
                \end{lstlisting}
            \item \textbf{Какие сети VLAN настроены на этих коммутаторах(S2, S3)?}\par
                Те же, что и на S1
            \item \textbf{В дополнение к VLAN по умолчанию, какие VLAN настроены на S2?}\par
                red, blue, yellow
            \item \textbf{Успешно ли выполнен эхо-запрос? Дайте пояснение.}\par
                Нет, эхо-запрос выполняется не успешно. Для решения данной проблемы нужно настроить транки на гигабитных портах. А так же S1 коммутатор.
            \item \textbf{Что будет результатом согласования магистрали между S1 и S2?}\par
                Поднимется транк между коммутаторами.
            \item \textbf{Каков режим и состояние этого порта?}\par
                Режим - auto, состояние - trunking.
            \item \textbf{Убедиться, что dpt отключен на 1 из 2х портов.}\par
                \begin{center}
                    \includegraphics[scale=0.8]{pics/3.5.5_1.png}
                \end{center}
            \item \textbf{Какая сеть VLAN с нетегированным трафиком сейчас используется для этих магистралей?}\par
                Vlan 1
            \item \textbf{Какие сообщения вы получили на S1? Как бы вы исправили эту ошибку?}\par
                Несогласован native vlan. Нужно поменять на S2 и S3 native vlan.
            \item \textbf{Почему пинг не удался?}\par
                На S3 trunk не работает.
            \item \textbf{Какой режим и инкапсуляция на G0/2?}\par
                Вывод команды sh int tr был пуст. 
            \item \textbf{Что отображается состояние "Negotiation of Trunking"?}\par
                 Off
        \end{itemize}
        \item lab 3.6.1
        \begin{itemize}
            \item  Команды по настройке vlan
            \begin{lstlisting}
en
conf t
vlan 10
name Admin
vlan 20
name Accounts
vlan 30
name HR
vlan 40
name Voice
vlan 99
name Management
vlan 100
name Native
int f0/1
switchport mode access
switchport access vlan 10
int f0/2
switchport mode access
switchport access vlan 20
int f0/3
switchport mode access
switchport access vlan 30
            \end{lstlisting}
        \item SWA
            \begin{lstlisting}
hostname SWA
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
...
interface FastEthernet0/24
!
interface GigabitEthernet0/1
switchport trunk native vlan 100
switchport mode trunk
switchport nonegotiate
!
interface GigabitEthernet0/2
switchport trunk native vlan 100
switchport mode dynamic desirable
!
interface Vlan1
no ip address
shutdown
!
interface Vlan99
ip address 192.168.99.252 255.255.255.0
!
line con 0
!
line vty 0 4
login
line vty 5 15
login
!
end
            \end{lstlisting}
        \item SWB
            \begin{lstlisting}
hostname SWB
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/2
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/3
switchport access vlan 30
switchport mode access
... 
interface FastEthernet0/24
!
interface GigabitEthernet0/1
switchport trunk native vlan 100
switchport mode trunk
switchport nonegotiate
!
interface GigabitEthernet0/2
!
interface Vlan1
no ip address
shutdown
!
interface Vlan99
ip address 192.168.99.253 255.255.255.0
!
line con 0
!
line vty 0 4
login
line vty 5 15
login
!
end
            \end{lstlisting}
        \item SWC
            \begin{lstlisting}
hostname SWC
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/2
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/3
switchport access vlan 30
switchport mode access
!
interface FastEthernet0/4
switchport access vlan 10
switchport mode access
switchport voice vlan 40
...
interface FastEthernet0/24
!
interface GigabitEthernet0/1
!
interface GigabitEthernet0/2
switchport trunk native vlan 100
!
interface Vlan1
no ip address
shutdown
!
interface Vlan99
ip address 192.168.99.254 255.255.255.0
!
line con 0
!
line vty 0 4
login
line vty 5 15
login
!
end
            \end{lstlisting}
        \end{itemize}
        \item lab 4.2.7
        \begin{itemize}
            \item S1
                \begin{lstlisting}
hostname S1
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
...
interface FastEthernet0/6
switchport access vlan 30
switchport mode access
...
interface FastEthernet0/11
switchport access vlan 10
switchport mode access
...
interface FastEthernet0/24
!
interface GigabitEthernet0/1
switchport mode trunk
!
interface GigabitEthernet0/2
!
interface Vlan1
no ip address
shutdown
!
line con 0
!
line vty 0 4
login
line vty 5 15
login
!
end
                \end{lstlisting}
            \item \textbf{Успешно ли выполнена проверка связи? Почему вы получили этот результат?}\par
                Пинги не проходят. Компьютеры находятся в разных подсетях.
            \item \textbf{Какой сети VLAN назначен интерфейс G0/1?}
                VLAN 1
            \item \textbf{Пинг от PC1 до PC3. Эхо-запросы по-прежнему должны не проходить между узлами. Дайте пояснение.}\par
                У свича до сих пор не настроен trunk до маршрутизатора
            \item \textbf{Как с помощью команды show vlan можно определить, что интерфейс — это магистральный порт?}\par
                Этот интерфейс не будет отображаться в sh vlan.
             \item \textbf{Какие адреса используют PC1 и PC3 в качестве адресов шлюза по умолчанию?}\par
                Адрес подинтерфейса
        \end{itemize}
        \item lab 4.3.8
        \begin{itemize}
            \item  Команды настройки vlan
            \begin{lstlisting}
vlan 10 
name Staff
vlan 20 
name Student
vlan 30 
name Faculty
            \end{lstlisting}
            \item MLS
                \begin{lstlisting}
hostname MLS
!
ip routing
!
ipv6 unicast-routing
!
spanning-tree mode pvst
!
interface FastEthernet0/1
...
interface FastEthernet0/24
!
interface GigabitEthernet0/1
 switchport trunk native vlan 99
 switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport nonegotiate
!
interface GigabitEthernet0/2
 no switchport
 ip address 209.165.200.225 255.255.255.252
 duplex auto
 speed auto
!
interface Vlan1
 no ip address
 shutdown
!
interface Vlan10
 mac-address 0002.16a2.cb01
 ip address 192.168.10.254 255.255.255.0
 ipv6 address 2001:DB8:ACAD:10::1/64
!
interface Vlan20
 mac-address 0002.16a2.cb02
 ip address 192.168.20.254 255.255.255.0
 ipv6 address 2001:DB8:ACAD:20::1/64
!
interface Vlan30
 mac-address 0002.16a2.cb03
 ip address 192.168.30.254 255.255.255.0
 ipv6 address 2001:DB8:ACAD:30::1/64
!
interface Vlan99
 mac-address 0002.16a2.cb04
 ip address 192.168.99.254 255.255.255.0
!
ip classless
!
ip flow-export version 9
!
ipv6 route ::/0 GigabitEthernet0/2 2001:DB8:ACAD:A::2
!
line con 0
 logging synchronous
!
line aux 0
!
line vty 0 4
 login
!
end
                \end{lstlisting}
            \item \textbf{Используйте команду show ip route. Есть ли активные маршруты?}\par
                Маршрутов нет, поскольку не включена маршрутизация.
        \end{itemize}
        \item lab 4.4.8
        \begin{itemize}
            \item \textbf{Не поднят сабинтерфейс на маршрутизаторе.}\par
                \begin{lstlisting}
int g0/1.10
no sh
                \end{lstlisting}
            \item \textbf{Не настроен на коммутаторе порт как транк}\par
                \begin{lstlisting}
int g0/1
switchport mode trunk
                \end{lstlisting}
            \item \textbf{Неверно настоен шлюз по-умолчанию}\par
                Поменять в GUI пк.
            \item \textbf{Неверно указаны vlan на маршрутизаторе}\par
                \begin{lstlisting}
int g0/1.10
no encapsulation dot1Q 30
int g0/1.30
no encapsulation dot1Q 10
int g0/1.10
encapsulation dot1Q 10
int g0/1.30
encapsulation dot1Q 30
                \end{lstlisting}
        \end{itemize}
        \newpage
        \item lab 4.5.1
        \begin{itemize}
            \item R1
                \begin{lstlisting}
hostname R1
!
ip cef
no ipv6 cef
!
license udi pid CISCO1941/K9 sn FTX15240DK4
!
spanning-tree mode pvst
!
interface GigabitEthernet0/0
ip address 172.17.25.2 255.255.255.252
duplex auto
speed auto
!
interface GigabitEthernet0/0.88
encapsulation dot1Q 88 native
no ip address
!
interface GigabitEthernet0/1
no ip address
duplex auto
speed auto
!
interface GigabitEthernet0/1.10
encapsulation dot1Q 10
ip address 172.17.10.1 255.255.255.0
!
interface GigabitEthernet0/1.20
encapsulation dot1Q 20
ip address 172.17.20.1 255.255.255.0
!
interface GigabitEthernet0/1.30
encapsulation dot1Q 30
ip address 172.17.30.1 255.255.255.0
!
interface GigabitEthernet0/1.88
encapsulation dot1Q 88 native
ip address 172.17.88.1 255.255.255.0
!
interface GigabitEthernet0/1.99
encapsulation dot1Q 99
ip address 172.17.99.1 255.255.255.0
!
interface Vlan1
no ip address
shutdown
!
ip classless
ip route 0.0.0.0 0.0.0.0 GigabitEthernet0/0 
!
ip flow-export version 9
!
line con 0
!
line aux 0
!
line vty 0 4
login
!
end 
                \end{lstlisting}
            \item S1 
            \begin{lstlisting}
hostname S1
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
shutdown
!
interface FastEthernet0/2
shutdown
!
interface FastEthernet0/3
shutdown
!
interface FastEthernet0/4
shutdown
!
interface FastEthernet0/5
shutdown
!
interface FastEthernet0/6
switchport access vlan 30
switchport mode access
!
interface FastEthernet0/7
switchport access vlan 30
switchport mode access
!
interface FastEthernet0/8
switchport access vlan 30
switchport mode access
!
interface FastEthernet0/9
switchport access vlan 30
switchport mode access
!
interface FastEthernet0/10
switchport access vlan 30
switchport mode access
!
interface FastEthernet0/11
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/12
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/13
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/14
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/15
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/16
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/17
switchport access vlan 10
switchport mode access
!
interface FastEthernet0/18
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/19
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/20
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/21
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/22
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/23
switchport access vlan 20
switchport mode access
!
interface FastEthernet0/24
switchport access vlan 20
switchport mode access
!
interface GigabitEthernet0/1
switchport trunk native vlan 88
switchport mode trunk
switchport nonegotiate
!
interface GigabitEthernet0/2
shutdown
!
interface Vlan1
no ip address
shutdown
!
interface Vlan99
ip address 172.17.99.10 255.255.255.0
!
ip default-gateway 172.17.99.1
!
line con 0
!
line vty 0 4
login
line vty 5 15
login
!
end 
            \end{lstlisting}
        \end{itemize}
    \end{enumerate}
\end{document}